---
title: 反射、动态代理
date: 2020-12-01
categories:
  - Java
tags:
  - 概念
---

## 反射

反射是赋予程序在运行时自省（introspect）的能力。反射可以做到获取类、属性、方法等等的元数据，也可以调用方法，动态创建对象，设置属性值等。反射同时也可以调用受保护的方法，属性等，可以使用 setAccessible 设置访问性（由于 JDK9 加入了模块，所以添加了限制，只有对应的模块 open 了才可以使用 setAccessible）。

## 动态代理

动态代理是一种方便运行时动态构建代理、动态处理代理方法调用的机制。

实现动态代理的方式有很多种：

JDK 自身提供的动态代理：基于接口，无法代理没有实现接口的类。优势：最小化依赖关系，减少依赖意味着简化开发和维护，JDK 本身的支持，可能比 cglib 更加可靠。平滑进行 JDK 版本升级，而字节码类库通常需要进行更新以保证在新版 Java 上能够使用。代码实现简单。

使用字节码操作机制的 Cglib，ASM，Javassit 等：基于类继承，无法代理 private 的方法，无法代理 final 修饰的类。优势：有的时候调用目标可能不便实现额外接口，从某种角度看，限定调用者实现接口是有些侵入性的实践，类似 cglib 动态代理就没有这种限制。只操作我们关心的类，而不必为其他相关类增加工作量。高性能。

更详细的可以看我之前在博客写的文章：[浅谈 Proxy 和 Aop](https://blog.ixk.me/talking-about-proxy-and-aop.html)
